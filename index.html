<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>积分商城</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <link rel="shortcut icon" href="/favicon.ico">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="stylesheet" href="css/sm.min.css">
        <link rel="stylesheet" href="css/swiper-3.4.2.min.css">
        <link rel="stylesheet" href="css/index.min.css">
        <link rel="stylesheet" href="font/font.css">
    </head>
    <body>
        <div class="page-group">
            <!--首页-->
            <div class="page page-current" id="main">
                <div class="content">
                    <!--广告轮播-->
                    <div class="swiper-container" id="swiper1" data-space-between='10'>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">1<img src="img/2.jpg" alt=""></div>
                            <div class="swiper-slide">2<img src='img/2.jpg' alt=""></div>
                            <div class="swiper-slide">3<img src='img/2.jpg' alt=""></div>
                        </div>
                        <div class="swiper-pagination sp1"></div>
                    </div>
                    <!--分类-->
                    <div class="sort">
                        <ul>
                            <a href='#sort'>
                                <li><i class="icon icon-app"></i>分类</li>
                            </a>
                            <a href='#order'>
                                <li><i class="icon icon-menu"></i>我的订单</li>
                            </a>
                            <a href='#search'>
                                <li><i class="icon icon-search"></i>搜索</li>
                            </a>
                            <a href='#my'>
                                <li><i class="icon icon-me"></i>我的积分</li>
                            </a>
                            <a href='#know'>
                                <li>
                                    <img src="img/know.png" class="icon-know"> 兑换须知
                                </li>
                            </a>
                        </ul>
                    </div>
                    <div class='hot'>
                        <div class="card">
                            <div class="card-header">热门兑换</div>
                            <div class="card-content">
                                <div class="card-content-inner">
                                    <!-- Swiper -->
                                    <div class="swiper-container" id="swiper2">
                                        <div class="swiper-wrapper">
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/1.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/1.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/1.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/2.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/2.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                            <div class="swiper-slide">
                                                <a href="#info" class="per">
                                                    <img src="img/2.jpg" alt="">                                                    100积分兑换
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='recommend'>
                        <div class="card">
                            <div class="card-header">为你推荐</div>
                            <div class="card-content">
                                <ul class="goods">
                                    <li class="per-goods">
                                        <a data-gid='goods1' href='#info'>
                                            <div>
                                                <img src="img/1.jpg" alt="">
                                                <p class="goods-t">【限时秒杀】汉堡王草莓新地买一送一优惠券</p>
                                                <div class="flex-l-r">
                                                    <span class="fen"><span>100</span>积分</span>
                                                    <span class='buy added'>已兑换</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-goods">
                                        <a data-gid='goods1' href='#info'>
                                            <div>
                                                <img src="img/1.jpg" alt="">
                                                <p class="goods-t">【限时秒杀】汉堡王草莓新地买一送一优惠券</p>
                                                <div class="flex-l-r">
                                                    <span class="fen"><span>100</span>积分</span>
                                                    <span class='buy'>兑换</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-goods">
                                        <a data-gid='goods1' href='#info'>
                                            <div>
                                                <img src="img/1.jpg" alt="">
                                                <p class="goods-t">【限时秒杀】汉堡王草莓新地买一送一优惠券</p>
                                                <div class="flex-l-r">
                                                    <span class="fen"><span>100</span>积分</span>
                                                    <span class='buy'>兑换</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-goods">
                                        <a data-gid='goods1' href='#info'>
                                            <div>
                                                <img src="img/1.jpg" alt="">
                                                <p class="goods-t">【限时秒杀】汉堡王草莓新地买一送一优惠券</p>
                                                <div class="flex-l-r">
                                                    <span class="fen"><span>100</span>积分</span>
                                                    <span class='buy'>兑换</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-goods">
                                        <a data-gid='goods1' href='#info'>
                                            <div>
                                                <img src="img/1.jpg" alt="">
                                                <p class="goods-t">【限时秒杀】汉堡王草莓新地买一送一优惠券</p>
                                                <div class="flex-l-r">
                                                    <span class="fen"><span>100</span>积分</span>
                                                    <span class='buy'>兑换</span>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--分类-->
            <div class="page" id="sort">
                <header class="bar bar-nav">
                    <a class="pull-left back icon icon-left">返回</a>
                    <h1 class="title">分类</h1>
                </header>
                <div class='content'>
                    <ul class='sort-l'>
                        <li data-tar='#sort1' class='active'>分类一</li>
                        <li data-tar='#sort2'>分类二</li>
                        <li data-tar='#sort3'>其他</li>
                    </ul>
                    <div class='sort-r'>
                        <div id="sort1">
                            sort1
                        </div>
                        <div id="sort2" style='display:none'>
                            sort2
                        </div>
                        <div id="sort3" style='display:none'>
                            sort3
                        </div>
                    </div>
                </div>
            </div>
            <!--订单-->
            <div id="order" class="page">
                <header class="bar bar-nav">
                    <a class="pull-left back icon icon-left">返回</a>
                    <h1 class="title">我的订单</h1>
                </header>
                <div class="content">
                    <div class="buttons-tab">
                        <a href="#tab1" class="tab-link active button">待兑换</a>
                        <a href="#tab2" class="tab-link button">待发货</a>
                        <a href="#tab3" class="tab-link button">全部</a>
                    </div>
                    <div class="tabs">
                        <div id="tab1" class="tab active">
                            <div class='list-block media-list'>
                                <ul>
                                    <li class="per-order">
                                        <span class='checkbox'></span>
                                        <a href='#info'>
                                            <div class='per-order-r'>
                                                <div class='per-order-img'>
                                                    <img src="img/1.jpg" alt="">
                                                </div>
                                                <div class='per-order-info'>
                                                    <h5>【限时秒杀】汉堡王草莓新地买一送一优惠券</h5>
                                                    <p><span class='per-fen'>100</span>积分</p>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-order">
                                        <span class='checkbox'></span>
                                        <a href='#info'>
                                            <div class='per-order-r'>
                                                <div class='per-order-img'>
                                                    <img src="img/1.jpg" alt="">
                                                </div>
                                                <div class='per-order-info'>
                                                    <h5>【限时秒杀】汉堡王草莓新地买一送一优惠券</h5>
                                                    <p><span class='per-fen'>100</span>积分</p>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="per-order">
                                        <span class='checkbox'></span>
                                        <a href='#info'>
                                            <div class='per-order-r'>
                                                <div class='per-order-img'>
                                                    <img src="img/1.jpg" alt="">
                                                </div>
                                                <div class='per-order-info'>
                                                    <h5>【限时秒杀】汉堡王草莓新地买一送一优惠券</h5>
                                                    <p><span class='per-fen'>100</span>积分</p>
                                                </div>
                                            </div>
                                        </a>
                                    </li>


                                </ul>
                            </div>
                            <div class='pay'>
                                <div class="all-check">
                                    <span class='checkbox'></span>
                                    <div class='pay-l'>
                                        总价：<span class='order-total'>0</span>积分
                                    </div>
                                </div>
                                <div class="pay-r">
                                    立即兑换
                                </div>
                            </div>
                        </div>
                        <div id="tab2" class="tab">
                            <div class="content-block">
                                <p>This is tab 2 content</p>
                            </div>
                        </div>
                        <div id="tab3" class="tab">
                            <div class="content-block">
                                <p>This is tab 3 content</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--搜索-->
            <div class="page" id="search">
                <header class="bar bar-nav">
                    <a class="pull-left back icon icon-left">返回</a>
                    <h1 class="title">搜索</h1>
                </header>
                <div class="bar bar-header-secondary">
                    <div class="searchbar">
                        <a class="searchbar-cancel">取消</a>
                        <div class="search-input">
                            <label class="icon icon-search" for="search"></label>
                            <input type="search" placeholder='输入关键字...' />
                        </div>
                    </div>
                </div>
            </div>
            <!--我的积分-->
            <div class="page" id="my">
                <div class="content">
                    <header class="bar bar-nav">
                        <a class="pull-left back icon icon-left">返回</a>
                        <h1 class="title">我的积分<a href="#know">积分规则</a></h1>
                    </header>
                    <div class="list-block contacts-block">
                        <div class="list-group">
                            <ul>
                                <li class="list-group-title">我的积分：<span>100</span></li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">
                                                <span class='point'>消费：10积分</span>
                                                <span class='time'>2017-5-1</span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">
                                                <span class='point'>消费：10积分</span>
                                                <span class='time'>2017-5-1</span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">
                                                <span class='point'>消费：10积分</span>
                                                <span class='time'>2017-5-1</span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">
                                                <span class='point'>消费：10积分</span>
                                                <span class='time'>2017-5-1</span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--兑换须知-->
            <div class="page" id="know">
                <header class="bar bar-nav">
                    <a class="pull-left back icon icon-left">返回</a>
                    <h1 class="title">兑换须知</h1>
                </header>
                <div class="content">
                    <h3 class="know-t">常见问题</h3>
                    <div class="card">
                        <div class="card-header">什么是熊猫积分？</div>
                        <div class="card-content">
                            <div class="card-content-inner">头和尾的卡片。卡头是用来显示一些额外的信息，或自定义操作卡标题和页脚。</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">如何获取熊猫积分？</div>
                        <div class="card-content">
                            <div class="card-content-inner">头和尾的卡片。卡头是用来显示一些额外的信息，或自定义操作卡标题和页脚。</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">如何使用熊猫积分？</div>
                        <div class="card-content">
                            <div class="card-content-inner">头和尾的卡片。卡头是用来显示一些额外的信息，或自定义操作卡标题和页脚。</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">熊猫积分有效期多久？</div>
                        <div class="card-content">
                            <div class="card-content-inner">头和尾的卡片。卡头是用来显示一些额外的信息，或自定义操作卡标题和页脚。</div>
                        </div>
                    </div>

                </div>
            </div>
            <!--商品详情-->
            <div id="info" class="page">
                <header class="bar bar-nav">
                    <a class="pull-left back icon icon-left">返回</a>
                    <h1 class="title">详情</h1>
                </header>
                <div class='content'>
                    <div class="card demo-card-header-pic">
                        <div valign="bottom" class="card-header color-white no-border no-padding">
                            <img class='card-cover' src="//gqianniu.alicdn.com/bao/uploaded/i4//tfscom/i3/TB10LfcHFXXXXXKXpXXXXXXXXXX_!!0-item_pic.jpg_250x250q60.jpg"
                                alt="">
                        </div>
                        <div class="card-content">
                            <div class="card-content-inner" style="padding-bottom:0">
                                <p class="color-gray">来自：荷兰品牌 菜鸟重庆保税2号仓发货</p>
                                <div class='intro'>
                                    <h3>进口低脂纯燕麦片 即食无糖脱脂早餐食品 冲饮养胃粥原味全麦麦片</h3>
                                </div>
                                 <p class="color-gray">库存量：<span>100</span>件</p>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header hot-t">商品简介</div>
                        <div class="card-content">
                        <div class="card-content-inner">头和尾的卡片。卡头是用来显示一些额外的信息，或自定义操作卡标题和页脚。</div>
                        </div>
                        <div class="card-footer msg">
                            <div>
                                联系方式：
                                <div class='list-block'><textarea style="height:2rem"></textarea></div>
                            </div>
                            <div class='addr'>
                                邮寄地址: <div class='list-block'><textarea></textarea></div>
                            </div>
                            <div>
                                给卖家留言：
                                <div class='list-block'><textarea></textarea></div>
                            </div>
                        </div>
                    </div>
                    <div class='info-footer'>
                        <div class='i-l'>
                            单价：<span>200</span>积分
                        </div>
                        <div class='i-r'>
                            立即兑换
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- popup, panel 等放在这里 -->
        <div class="panel-overlay"></div>
        <script src="js/jquery-3.2.1.min.js"></script>
        <script>var Zepto = $;</script>
        <script src="js/sm.min.js"></script>
        <script src="js/swiper-3.4.2.jquery.min.js"></script>
        <script>
            var gid = 1

            $(document).on("pageInit", function (e, pageId, $page) {
                //分类
                if (pageId == "sort") {
                    $('#sort .sort-l').click(function (e) {
                        var tar = e.target
                        $(tar).addClass('active').siblings().removeClass(
                            'active')
                        $('#sort .sort-r>div').hide();
                        $($(tar).attr('data-tar')).show()
                    })
                }
                if (pageId == "main") {
                    // 轮播
                    var mySwiper1 = new Swiper('#swiper1', {
                        pagination: '.swiper-pagination',
                        autoplay: 3000,
                        paginationClickable: true
                    })
                    var mySwiper2 = new Swiper('#swiper2', {
                        slidesPerView: 3,
                        paginationClickable: true,
                        spaceBetween: 30,
                        freeMode: true
                    })
                }
                //订单
                if (pageId == 'order') {
                    $('.checkbox').click(function () {
                        $(this).toggleClass('checked')
                    })
                    $('.all-check .checkbox').click(function () {
                        $('.per-order .checkbox').attr('class',
                            $(this).attr('class'))
                        calcTotal()

                    })
                    $('.per-order .checkbox').click(function () {
                        if ($('.per-order .checkbox.checked').length ==
                            $(this).parents('ul').find(
                                '.per-order').length) {
                            $('.all-check .checkbox').addClass(
                                'checked')
                        } else {
                            $('.all-check .checkbox').removeClass(
                                'checked')
                        }
                        calcTotal()
                    })
                }
                //积分须知
                if (pageId == 'know') {
                    $('#know .card-header').click(function () {
                        $(this).next().toggle(350).parent().siblings(
                            '.card').find('.card-content').slideUp()
                    })
                }
                //商品详情
                if (pageId == 'info') {
                    if (!gid) {
                        $.toast("获取商品详情失败", 2000, 'toast-info');
                    } else {

                    }
                }
            });

            function calcTotal() {
                //计算总积分
                var total = 0
                $('.per-order .checkbox.checked').siblings().find('.per-fen').each(
                    function (i, v) {
                        total += $(v).html() - 0
                    }

                )
                $('.order-total').html(total)
            }

            $(function () {

                $.init();

                //详情
                $('a[data-gid]').click(function () {
                    gid = $(this).attr('data-gid');
                })

                // 购买
                $('.buy').click(function (e) {
                    e.preventDefault()
                    e.stopPropagation()
                    if (!$(this).hasClass('added')) {
                        $.toast('已加入我的订单', 2000, 'toast-added')
                        $(this).addClass('added').html('已兑换')
                    }
                })

            })
        </script>
    </body>

</html>